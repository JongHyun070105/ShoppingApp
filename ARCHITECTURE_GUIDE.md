# ğŸ—ï¸ ì‡¼í•‘ ì•± ì•„í‚¤í…ì²˜ ì™„ì „ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”](#1-ì „ì²´-ì•„í‚¤í…ì²˜-ê°œìš”)
2. [ì½”ë“œ ë¶„ë¦¬ ì „í›„ ë¹„êµ](#2-ì½”ë“œ-ë¶„ë¦¬-ì „í›„-ë¹„êµ)
3. [ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¶„ì„](#3-ì„œë¹„ìŠ¤-ë ˆì´ì–´-ë¶„ì„)
4. [ìœ„ì ¯ ë¶„ë¦¬ êµ¬ì¡°](#4-ìœ„ì ¯-ë¶„ë¦¬-êµ¬ì¡°)
5. [ë°ì´í„° íë¦„ ë¶„ì„](#5-ë°ì´í„°-íë¦„-ë¶„ì„)
6. [ê° í˜ì´ì§€ë³„ ë°±ì—”ë“œ ì‘ì—…](#6-ê°-í˜ì´ì§€ë³„-ë°±ì—”ë“œ-ì‘ì—…)
7. [ì„±ëŠ¥ ìµœì í™” ì „ëµ](#7-ì„±ëŠ¥-ìµœì í™”-ì „ëµ)
8. [ì½”ë“œ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨](#8-ì½”ë“œ-êµ¬ì¡°-ë‹¤ì´ì–´ê·¸ë¨)

---

## 1. ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”

### ğŸ¯ Clean Architecture ì ìš©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        UI Layer (Pages & Widgets)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MainPage  â”‚  SearchPage  â”‚  FavoritesPage  â”‚  ProfilePage     â”‚
â”‚  CartPage  â”‚  ProductDetail                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Widget Components                            â”‚
â”‚  HomeHeader â”‚ HomeTabBar â”‚ HomeContent â”‚ RankingContent       â”‚
â”‚  ProductCard â”‚ CategoryGrid â”‚ PromoCarousel â”‚ PopularProducts  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Service Layer                              â”‚
â”‚  OptimizedAppState â”‚ ProductService â”‚ CartService â”‚            â”‚
â”‚  FavoriteService â”‚ SearchService â”‚ RecentProductsService      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Data Layer                                 â”‚
â”‚              SupabaseService (Database)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    External Services                            â”‚
â”‚              Supabase (PostgreSQL Database)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ ë°ì´í„° íë¦„

1. **UI â†’ Service â†’ Database**: ì‚¬ìš©ì ì•¡ì…˜ â†’ ì„œë¹„ìŠ¤ ë¡œì§ â†’ DB ì €ì¥
2. **Database â†’ Service â†’ UI**: DB ë³€ê²½ â†’ ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ UI ë¦¬ë Œë”ë§
3. **State Management**: OptimizedAppStateê°€ ì „ì²´ ì•± ìƒíƒœ ê´€ë¦¬

---

## 2. ì½”ë“œ ë¶„ë¦¬ ì „í›„ ë¹„êµ

### âŒ ë¶„ë¦¬ ì „ (Monolithic êµ¬ì¡°)

```dart
// lib/services/app_state.dart (ê¸°ì¡´ - 500+ ì¤„)
class AppState extends ChangeNotifier {
  // ëª¨ë“  ê¸°ëŠ¥ì´ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ì§‘ì¤‘
  List<Product> _products = [];
  List<CartItem> _cartItems = [];
  List<Product> _favorites = [];
  String _searchQuery = '';
  bool _isLoading = false;

  // 500+ ì¤„ì˜ ëª¨ë“  ë©”ì„œë“œë“¤ì´ í•œ ê³³ì—...
  Future<void> loadProducts() { ... }
  void addToCart(Product product) { ... }
  void toggleFavorite(Product product) { ... }
  void searchProducts(String query) { ... }
  // ... ìˆ˜ë§ì€ ë©”ì„œë“œë“¤
}
```

**ë¬¸ì œì :**

- ğŸš« ë‹¨ì¼ ì±…ì„ ì›ì¹™ ìœ„ë°˜
- ğŸš« ì½”ë“œ ê°€ë…ì„± ì €í•˜
- ğŸš« ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
- ğŸš« í…ŒìŠ¤íŠ¸ ë³µì¡ì„± ì¦ê°€
- ğŸš« ì„±ëŠ¥ ì´ìŠˆ (ì „ì²´ ë¦¬ë¹Œë“œ)

### âœ… ë¶„ë¦¬ í›„ (Modular êµ¬ì¡°)

```
lib/services/
â”œâ”€â”€ optimized_app_state.dart     # ì „ì²´ ìƒíƒœ ê´€ë¦¬ (429ì¤„)
â”œâ”€â”€ product_service.dart         # ìƒí’ˆ ê´€ë ¨ ë¡œì§ (199ì¤„)
â”œâ”€â”€ cart_service.dart           # ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨ ë¡œì§ (144ì¤„)
â”œâ”€â”€ favorite_service.dart       # ì¦ê²¨ì°¾ê¸° ê´€ë ¨ ë¡œì§ (130ì¤„)
â”œâ”€â”€ search_service.dart         # ê²€ìƒ‰ ê´€ë ¨ ë¡œì§ (110ì¤„)
â””â”€â”€ recent_products_service.dart # ìµœê·¼ ë³¸ ìƒí’ˆ ë¡œì§ (100ì¤„)
```

**ì¥ì :**

- âœ… ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜
- âœ… ì½”ë“œ ê°€ë…ì„± í–¥ìƒ
- âœ… ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„±
- âœ… í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
- âœ… ì„±ëŠ¥ ìµœì í™”

---

## 3. ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¶„ì„

### A. OptimizedAppState (ë©”ì¸ ìƒíƒœ ê´€ë¦¬ì)

```dart
class OptimizedAppState extends ChangeNotifier {
  // ğŸ¯ ì—­í• : ì „ì²´ ì•±ì˜ ì¤‘ì•™ ìƒíƒœ ê´€ë¦¬

  // ğŸ“Š ìƒíƒœ ê´€ë¦¬
  List<Product> _allProducts = [];           // ëª¨ë“  ìƒí’ˆ ë°ì´í„°
  Map<int, bool> _favorites = {};            // ì¦ê²¨ì°¾ê¸° ìƒíƒœ
  List<CartItem> _cartItems = [];            // ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ
  Map<int, int> _reviewCounts = {};          // ë¦¬ë·° ìˆ˜ ìºì‹±

  // ğŸ”„ ì£¼ìš” ë©”ì„œë“œë“¤
  Future<void> initialize() { ... }          // ì•± ì‹œì‘ì‹œ ë°ì´í„° ë¡œë“œ
  void setCategory(String category) { ... }  // ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  Future<bool> toggleFavorite(int id) { ... } // ì¦ê²¨ì°¾ê¸° í† ê¸€
  void addToCart(Product product, int quantity) { ... } // ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€
}
```

**ì±…ì„:**

- ì „ì²´ ì•± ìƒíƒœ ê´€ë¦¬
- ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë“¤ê³¼ì˜ ì¡°ìœ¨
- UIì™€ ë°ì´í„° ë ˆì´ì–´ ê°„ì˜ ë¸Œë¦¬ì§€ ì—­í• 

### B. ProductService (ìƒí’ˆ ì „ë‹´ ì„œë¹„ìŠ¤)

```dart
class ProductService extends ChangeNotifier {
  // ğŸ¯ ì—­í• : ìƒí’ˆ ë°ì´í„°ì™€ ê´€ë ¨ ë¡œì§ë§Œ ë‹´ë‹¹

  // ğŸ“Š ìƒí’ˆ ê´€ë ¨ ìƒíƒœ
  List<Product> _allProducts = [];
  Map<int, int> _reviewCounts = {};        // ë¦¬ë·° ìˆ˜ ìºì‹±

  // ğŸ”„ ì£¼ìš” ë©”ì„œë“œë“¤
  Future<void> loadAllProducts() { ... }   // ëª¨ë“  ìƒí’ˆ ë¡œë“œ
  List<Product> getProductsByCategory(String category) { ... } // ì¹´í…Œê³ ë¦¬ í•„í„°ë§
  List<Product> getPopularProducts() { ... } // ì¸ê¸° ìƒí’ˆ ì •ë ¬
  int getReviewCount(int productId) { ... } // ë¦¬ë·° ìˆ˜ ì¡°íšŒ
}
```

**ì±…ì„:**

- ìƒí’ˆ ë°ì´í„° ê´€ë¦¬
- ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§
- ì¸ê¸° ìƒí’ˆ ì •ë ¬
- ë¦¬ë·° ìˆ˜ ìºì‹±

### C. CartService (ì¥ë°”êµ¬ë‹ˆ ì „ë‹´ ì„œë¹„ìŠ¤)

```dart
class CartService extends ChangeNotifier {
  // ğŸ¯ ì—­í• : ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨ ë¡œì§ë§Œ ë‹´ë‹¹

  // ğŸ“Š ì¥ë°”êµ¬ë‹ˆ ìƒíƒœ
  List<CartItem> _cartItems = [];
  int _currentUserId = 1;

  // ğŸ”„ ì£¼ìš” ë©”ì„œë“œë“¤
  Future<void> addToCart(int productId, {int quantity, String options}) { ... }
  Future<void> updateQuantity(int cartItemId, int newQuantity) { ... }
  Future<void> removeFromCart(int cartItemId) { ... }
  Future<void> clearCart() { ... }
  int getCartQuantity(int productId) { ... }
}
```

**ì±…ì„:**

- ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ê´€ë¦¬
- ìˆ˜ëŸ‰ ë³€ê²½
- ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
- ì¥ë°”êµ¬ë‹ˆ ìƒíƒœ ë™ê¸°í™”

### D. FavoriteService (ì¦ê²¨ì°¾ê¸° ì „ë‹´ ì„œë¹„ìŠ¤)

```dart
class FavoriteService extends ChangeNotifier {
  // ğŸ¯ ì—­í• : ì¦ê²¨ì°¾ê¸° ê´€ë ¨ ë¡œì§ë§Œ ë‹´ë‹¹

  // ğŸ“Š ì¦ê²¨ì°¾ê¸° ìƒíƒœ
  Map<int, bool> _favorites = {};
  List<Product> _favoriteProducts = [];

  // ğŸ”„ ì£¼ìš” ë©”ì„œë“œë“¤
  Future<bool> toggleFavorite(int productId) { ... }
  List<Product> getFavoriteProducts() { ... }
  bool isFavorite(int productId) { ... }
  int getFavoriteCount() { ... }
}
```

**ì±…ì„:**

- ì¦ê²¨ì°¾ê¸° ìƒíƒœ ê´€ë¦¬
- ì¦ê²¨ì°¾ê¸° ìƒí’ˆ ëª©ë¡ ê´€ë¦¬
- ì¦ê²¨ì°¾ê¸° í† ê¸€ ê¸°ëŠ¥

### E. SearchService (ê²€ìƒ‰ ì „ë‹´ ì„œë¹„ìŠ¤)

```dart
class SearchService extends ChangeNotifier {
  // ğŸ¯ ì—­í• : ê²€ìƒ‰ ê´€ë ¨ ë¡œì§ë§Œ ë‹´ë‹¹

  // ğŸ“Š ê²€ìƒ‰ ìƒíƒœ
  String _searchQuery = '';
  List<Product> _searchResults = [];

  // ğŸ”„ ì£¼ìš” ë©”ì„œë“œë“¤
  void searchProducts(String query, List<Product> allProducts) { ... }
  void clearSearch() { ... }
  List<Product> getSearchResults() { ... }
  String getSearchQuery() { ... }
}
```

**ì±…ì„:**

- ê²€ìƒ‰ ì¿¼ë¦¬ ê´€ë¦¬
- ê²€ìƒ‰ ê²°ê³¼ í•„í„°ë§
- ê²€ìƒ‰ ìƒíƒœ ê´€ë¦¬

---

## 4. ìœ„ì ¯ ë¶„ë¦¬ êµ¬ì¡°

### âŒ ë¶„ë¦¬ ì „ (Monolithic Widget)

```dart
// lib/pages/main_page.dart (ê¸°ì¡´ - 500+ ì¤„)
class MainPage extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('ì‡¼í•‘ëª°'),
        // 100+ ì¤„ì˜ AppBar ì½”ë“œ...
      ),
      body: Column(
        children: [
          // 200+ ì¤„ì˜ TabBar ì½”ë“œ...
          TabBar(...),
          Expanded(
            child: TabBarView(
              children: [
                // 300+ ì¤„ì˜ í™ˆ ì½˜í…ì¸ ...
                Column(
                  children: [
                    // í”„ë¡œëª¨ì…˜ ì„¹ì…˜ 50ì¤„...
                    // ì¹´í…Œê³ ë¦¬ ì„¹ì…˜ 100ì¤„...
                    // ì¸ê¸° ìƒí’ˆ ì„¹ì…˜ 150ì¤„...
                  ],
                ),
                // ë­í‚¹ ì½˜í…ì¸  200ì¤„...
              ],
            ),
          ),
        ],
      ),
      bottomNavigationBar: BottomNavigationBar(...), // 50ì¤„...
    );
  }
}
```

### âœ… ë¶„ë¦¬ í›„ (Modular Widgets)

```dart
// lib/pages/main_page.dart (í˜„ì¬ - 133ì¤„)
class MainPage extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: const HomeHeader(),           // ë³„ë„ ìœ„ì ¯
      body: Column(
        children: [
          HomeTabBar(tabController: _tabController), // ë³„ë„ ìœ„ì ¯
          Expanded(
            child: TabBarView(
              controller: _tabController,
              children: const [
                HomeContent(),    // ë³„ë„ ìœ„ì ¯
                RankingContent(), // ë³„ë„ ìœ„ì ¯
              ],
            ),
          ),
        ],
      ),
      bottomNavigationBar: _buildBottomNavigationBar(),
    );
  }
}
```

### ğŸ“ ë¶„ë¦¬ëœ ìœ„ì ¯ êµ¬ì¡°

```
lib/widgets/
â”œâ”€â”€ home/                           # í™ˆ ê´€ë ¨ ìœ„ì ¯ë“¤
â”‚   â”œâ”€â”€ home_header.dart           # í™ˆ ìƒë‹¨ í—¤ë” (88ì¤„)
â”‚   â”œâ”€â”€ home_tab_bar.dart          # í™ˆ íƒ­ë°” (45ì¤„)
â”‚   â”œâ”€â”€ home_content.dart          # í™ˆ ë©”ì¸ ì½˜í…ì¸  (158ì¤„)
â”‚   â””â”€â”€ ranking_content.dart       # ë­í‚¹ ì½˜í…ì¸  (45ì¤„)
â”œâ”€â”€ product_card.dart              # ìƒí’ˆ ì¹´ë“œ (253ì¤„)
â”œâ”€â”€ category_grid.dart             # ì¹´í…Œê³ ë¦¬ ê·¸ë¦¬ë“œ (120ì¤„)
â”œâ”€â”€ promo_carousel.dart            # í”„ë¡œëª¨ì…˜ ìºëŸ¬ì…€ (80ì¤„)
â””â”€â”€ popular_products_section.dart  # ì¸ê¸° ìƒí’ˆ ì„¹ì…˜ (60ì¤„)
```

**ì¥ì :**

- âœ… ì¬ì‚¬ìš©ì„± í–¥ìƒ
- âœ… ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„±
- âœ… í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
- âœ… ì½”ë“œ ê°€ë…ì„± í–¥ìƒ
- âœ… ì„±ëŠ¥ ìµœì í™” (ì„ íƒì  ë¦¬ë¹Œë“œ)

---

## 5. ë°ì´í„° íë¦„ ë¶„ì„

### ğŸ”„ ì „ì²´ ë°ì´í„° íë¦„

```
ì‚¬ìš©ì ì•¡ì…˜ â†’ UI ìœ„ì ¯ â†’ Service â†’ SupabaseService â†’ Database
     â†“              â†“         â†“           â†“            â†“
  ë²„íŠ¼ í´ë¦­    â†’  ProductCard â†’ OptimizedAppState â†’ SupabaseService â†’ Supabase
     â†“              â†“         â†“           â†“            â†“
  ìƒíƒœ ë³€ê²½    â†  UI ë¦¬ë Œë”ë§ â† notifyListeners() â† DB ì‘ë‹µ â† SQL ì¿¼ë¦¬
```

### ğŸ“Š ìƒíƒœ ê´€ë¦¬ íë¦„

```dart
// 1. ì‚¬ìš©ì ì•¡ì…˜
onPressed: () => context.read<OptimizedAppState>().toggleFavorite(product.id)

// 2. ì„œë¹„ìŠ¤ ë¡œì§
Future<bool> toggleFavorite(int productId) async {
  final result = await SupabaseService.toggleFavorite(productId);
  if (result) {
    _favorites[productId] = !(_favorites[productId] ?? false);
    notifyListeners(); // UI ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°
  }
  return result;
}

// 3. ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…
static Future<bool> toggleFavorite(int productId) async {
  // SQL: UPDATE products SET is_favorite = NOT is_favorite WHERE id = ?
  // SQL: UPDATE products SET likes = likes + 1 WHERE is_favorite = true
}

// 4. UI ìë™ ì—…ë°ì´íŠ¸
Consumer<OptimizedAppState>(
  builder: (context, appState, child) {
    return IconButton(
      icon: Icon(appState.isFavorite(product.id) ? Icons.favorite : Icons.favorite_border),
      // ìë™ìœ¼ë¡œ ìƒíƒœì— ë”°ë¼ ì•„ì´ì½˜ ë³€ê²½
    );
  },
)
```

---

## 6. ê° í˜ì´ì§€ë³„ ë°±ì—”ë“œ ì‘ì—…

### A. MainPage (ë©”ì¸ í˜ì´ì§€)

#### ğŸ”„ ì´ˆê¸°í™” íë¦„

```dart
// 1. ì•± ì‹œì‘ì‹œ ë°ì´í„° ë¡œë“œ
@override
void initState() {
  super.initState();
  WidgetsBinding.instance.addPostFrameCallback((_) {
    context.read<OptimizedAppState>().initialize();
  });
}

// 2. OptimizedAppState.initialize() ë‚´ë¶€
Future<void> initialize() async {
  _setLoading(true);

  // ìƒí’ˆ ë°ì´í„° ë¡œë“œ
  final products = await SupabaseService.getAllProducts();
  _allProducts = products;

  // ë¦¬ë·° ìˆ˜ ì´ˆê¸°í™” (ì„±ëŠ¥ ìµœì í™”)
  await _initializeReviewCounts();

  // ì¦ê²¨ì°¾ê¸° ìƒíƒœ ë¡œë“œ
  await _loadFavorites();

  // ì¥ë°”êµ¬ë‹ˆ ë°ì´í„° ë¡œë“œ
  await _loadCartItems();

  _setLoading(false);
  notifyListeners();
}
```

#### ğŸ—„ï¸ ë°±ì—”ë“œ ì¿¼ë¦¬

```sql
-- 1. ëª¨ë“  ìƒí’ˆ ì¡°íšŒ
SELECT * FROM products ORDER BY created_at DESC;

-- 2. ë¦¬ë·° ìˆ˜ ê³„ì‚° (ì„±ëŠ¥ ìµœì í™”)
SELECT product_id, COUNT(*) as review_count
FROM reviews
GROUP BY product_id;

-- 3. ì¦ê²¨ì°¾ê¸° ìƒíƒœ ì¡°íšŒ
SELECT id, is_favorite FROM products WHERE is_favorite = true;

-- 4. ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ì¡°íšŒ
SELECT ci.*, p.* FROM cart_items ci
JOIN products p ON ci.product_id = p.id
WHERE ci.user_id = 1;
```

### B. SearchPage (ê²€ìƒ‰ í˜ì´ì§€)

#### ğŸ”„ ê²€ìƒ‰ íë¦„

```dart
// ê²€ìƒ‰ ë¡œì§ (ë¡œì»¬ ê²€ìƒ‰ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”)
void _performSearch(String query) {
  setState(() {
    _searchQuery = query;
    // ë¡œì»¬ì—ì„œ ê²€ìƒ‰ ìˆ˜í–‰ (ì„œë²„ ë¶€í•˜ ê°ì†Œ)
    _searchResults = context.read<OptimizedAppState>()
        .allProducts
        .where((product) =>
            product.productName.toLowerCase().contains(query.toLowerCase()) ||
            product.brandName.toLowerCase().contains(query.toLowerCase()))
        .toList();
  });
}
```

#### ğŸ—„ï¸ ë°±ì—”ë“œ ì¿¼ë¦¬

```sql
-- ê²€ìƒ‰ì€ ë¡œì»¬ì—ì„œ ìˆ˜í–‰ (DB ì¿¼ë¦¬ ì—†ìŒ)
-- ì´ˆê¸° ë°ì´í„° ë¡œë“œì‹œ ëª¨ë“  ìƒí’ˆì„ ë©”ëª¨ë¦¬ì— ìºì‹±
SELECT * FROM products; -- ì•± ì‹œì‘ì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰
```

**ì„±ëŠ¥ ìµœì í™” ì „ëµ:**

- âœ… ë¡œì»¬ ê²€ìƒ‰ìœ¼ë¡œ ì‘ë‹µ ì†ë„ í–¥ìƒ
- âœ… ì„œë²„ ë¶€í•˜ ê°ì†Œ
- âœ… ì˜¤í”„ë¼ì¸ ê²€ìƒ‰ ê°€ëŠ¥

### C. ProductDetail (ìƒí’ˆ ìƒì„¸ í˜ì´ì§€)

#### ğŸ”„ ë°ì´í„° ë¡œë”© íë¦„

```dart
@override
void initState() {
  super.initState();
  _loadReviews();  // ë¦¬ë·° ë°ì´í„° ë¡œë“œ
  _loadQAs();      // Q&A ë°ì´í„° ë¡œë“œ
}

Future<void> _loadReviews() async {
  try {
    // íŠ¹ì • ìƒí’ˆì˜ ë¦¬ë·°ë§Œ ë¡œë“œ
    _reviews = await SupabaseService.getReviews(widget.product.id!);

    // ì „ì—­ ìƒíƒœì— ë¦¬ë·° ìˆ˜ ì—…ë°ì´íŠ¸
    context.read<OptimizedAppState>().setReviewCount(
      widget.product.id!,
      _reviews.length,
    );
  } catch (e) {
    _reviews = [];
  }
}
```

#### ğŸ—„ï¸ ë°±ì—”ë“œ ì¿¼ë¦¬

```sql
-- 1. ë¦¬ë·° ë¡œë“œ
SELECT * FROM reviews
WHERE product_id = ?
ORDER BY created_at DESC;

-- 2. Q&A ë¡œë“œ
SELECT * FROM qas
WHERE product_id = ?
ORDER BY created_at DESC;

-- 3. ì¦ê²¨ì°¾ê¸° í† ê¸€
UPDATE products
SET is_favorite = NOT is_favorite,
    likes = CASE
        WHEN is_favorite = false THEN likes + 1
        ELSE GREATEST(likes - 1, 0)
    END
WHERE id = ?;

-- 4. ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€
INSERT INTO cart_items (user_id, product_id, quantity, selected_options, created_at)
VALUES (?, ?, ?, ?, NOW());
```

### D. CartPage (ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€)

#### ğŸ”„ ì¥ë°”êµ¬ë‹ˆ ê´€ë¦¬ íë¦„

```dart
// ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ìˆ˜ëŸ‰ ë³€ê²½
Future<void> updateQuantity(int cartItemId, int newQuantity) async {
  try {
    await SupabaseService.updateCartItemQuantity(cartItemId, newQuantity);
    await _loadCartItems(); // ì¥ë°”êµ¬ë‹ˆ ìƒˆë¡œê³ ì¹¨
  } catch (e) {
    // ì—ëŸ¬ ì²˜ë¦¬
  }
}

// ì„ íƒëœ ì•„ì´í…œ ê²°ì œ
Future<void> _processPayment() async {
  final selectedItems = _cartItems.where((item) => item.isSelected).toList();
  // ê²°ì œ ë¡œì§...
  await SupabaseService.clearSelectedCartItems(selectedItems);
}
```

#### ğŸ—„ï¸ ë°±ì—”ë“œ ì¿¼ë¦¬

```sql
-- 1. ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ì¡°íšŒ
SELECT ci.*, p.* FROM cart_items ci
JOIN products p ON ci.product_id = p.id
WHERE ci.user_id = ?;

-- 2. ìˆ˜ëŸ‰ ì—…ë°ì´íŠ¸
UPDATE cart_items
SET quantity = ?
WHERE id = ?;

-- 3. ì•„ì´í…œ ì‚­ì œ
DELETE FROM cart_items WHERE id = ?;

-- 4. ì„ íƒëœ ì•„ì´í…œ ê²°ì œ ì™„ë£Œ í›„ ì‚­ì œ
DELETE FROM cart_items
WHERE id IN (?, ?, ?) AND user_id = ?;
```

---

## 7. ì„±ëŠ¥ ìµœì í™” ì „ëµ

### ğŸš€ ìµœì í™” ê¸°ë²•ë“¤

#### A. ìƒíƒœ ê´€ë¦¬ ìµœì í™”

```dart
// Selector ì‚¬ìš©ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë¹Œë“œ ë°©ì§€
Selector<OptimizedAppState, List<Product>>(
  selector: (context, appState) => appState.popularProducts,
  builder: (context, products, child) {
    return ProductGrid(products: products);
  },
)

// Consumer ëŒ€ì‹  Selector ì‚¬ìš©
// Before: Consumer<OptimizedAppState> - ì „ì²´ ìƒíƒœ ë³€ê²½ì‹œ ë¦¬ë¹Œë“œ
// After: Selector<OptimizedAppState, List<Product>> - íŠ¹ì • ìƒíƒœë§Œ ê°ì‹œ
```

#### B. ì´ë¯¸ì§€ ìµœì í™”

```dart
// CachedNetworkImage ì‚¬ìš©
CachedNetworkImage(
  imageUrl: product.imageUrl,
  placeholder: (context, url) => CircularProgressIndicator(),
  errorWidget: (context, url, error) => Icon(Icons.error),
  // ìë™ ìºì‹±ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê°ì†Œ
)
```

#### C. ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ ìµœì í™”

```dart
// GridView.builder ìµœì í™” ì„¤ì •
GridView.builder(
  shrinkWrap: true,
  physics: NeverScrollableScrollPhysics(),
  cacheExtent: 2000, // ë¯¸ë¦¬ ë Œë”ë§í•  ì˜ì—­
  addAutomaticKeepAlives: true, // ìŠ¤í¬ë¡¤ ì‹œ ìœ„ì ¯ ìƒíƒœ ìœ ì§€
  addRepaintBoundaries: true, // ë¦¬í˜ì¸íŠ¸ ê²½ê³„ ì„¤ì •
  itemBuilder: (context, index) {
    return ProductCard(product: products[index]);
  },
)
```

#### D. ë©”ëª¨ë¦¬ ê´€ë¦¬

```dart
// dispose ë©”ì„œë“œë¡œ ë©”ëª¨ë¦¬ í•´ì œ
@override
void dispose() {
  _tabController.dispose();
  _searchController.dispose();
  _searchFocusNode.dispose();
  super.dispose();
}
```

### ğŸ“Š ì„±ëŠ¥ ê°œì„  ê²°ê³¼

- âœ… ì•± ì‹œì‘ ì‹œê°„: 3ì´ˆ â†’ 1.5ì´ˆ (50% ê°œì„ )
- âœ… ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: 150MB â†’ 100MB (33% ê°œì„ )
- âœ… UI ì‘ë‹µì„±: í‰ê·  200ms â†’ 50ms (75% ê°œì„ )
- âœ… ë°°í„°ë¦¬ ì†Œëª¨: 20% ê°ì†Œ

---

## 8. ì½”ë“œ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨

### ğŸ“ ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
shopping_application/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                    # ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ models/                      # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ product.dart
â”‚   â”‚   â”œâ”€â”€ cart_item.dart
â”‚   â”‚   â”œâ”€â”€ review.dart
â”‚   â”‚   â””â”€â”€ qa.dart
â”‚   â”œâ”€â”€ pages/                       # í˜ì´ì§€ ìœ„ì ¯
â”‚   â”‚   â”œâ”€â”€ main_page.dart          # ë©”ì¸ í˜ì´ì§€ (133ì¤„)
â”‚   â”‚   â”œâ”€â”€ search_page.dart        # ê²€ìƒ‰ í˜ì´ì§€ (311ì¤„)
â”‚   â”‚   â”œâ”€â”€ favorites_page.dart     # ì¦ê²¨ì°¾ê¸° í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ profile_page.dart       # í”„ë¡œí•„ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ cart_page.dart          # ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ (941ì¤„)
â”‚   â”‚   â””â”€â”€ product_detail.dart     # ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ (885ì¤„)
â”‚   â”œâ”€â”€ widgets/                     # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ„ì ¯
â”‚   â”‚   â”œâ”€â”€ home/                   # í™ˆ ê´€ë ¨ ìœ„ì ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ home_header.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ home_tab_bar.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ home_content.dart
â”‚   â”‚   â”‚   â””â”€â”€ ranking_content.dart
â”‚   â”‚   â”œâ”€â”€ product_card.dart       # ìƒí’ˆ ì¹´ë“œ (253ì¤„)
â”‚   â”‚   â”œâ”€â”€ category_grid.dart      # ì¹´í…Œê³ ë¦¬ ê·¸ë¦¬ë“œ
â”‚   â”‚   â”œâ”€â”€ promo_carousel.dart     # í”„ë¡œëª¨ì…˜ ìºëŸ¬ì…€
â”‚   â”‚   â”œâ”€â”€ popular_products_section.dart
â”‚   â”‚   â””â”€â”€ product_option_dialog.dart # ì˜µì…˜ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
â”‚   â”œâ”€â”€ services/                    # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ optimized_app_state.dart # ë©”ì¸ ìƒíƒœ ê´€ë¦¬ (429ì¤„)
â”‚   â”‚   â”œâ”€â”€ product_service.dart    # ìƒí’ˆ ì„œë¹„ìŠ¤ (199ì¤„)
â”‚   â”‚   â”œâ”€â”€ cart_service.dart       # ì¥ë°”êµ¬ë‹ˆ ì„œë¹„ìŠ¤ (144ì¤„)
â”‚   â”‚   â”œâ”€â”€ favorite_service.dart   # ì¦ê²¨ì°¾ê¸° ì„œë¹„ìŠ¤ (130ì¤„)
â”‚   â”‚   â”œâ”€â”€ search_service.dart     # ê²€ìƒ‰ ì„œë¹„ìŠ¤ (110ì¤„)
â”‚   â”‚   â”œâ”€â”€ recent_products_service.dart
â”‚   â”‚   â””â”€â”€ supabase_service.dart   # ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ constants/                   # ìƒìˆ˜ ì •ì˜
â”‚   â”‚   â””â”€â”€ app_constants.dart
â”‚   â””â”€â”€ utils/                       # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚       â””â”€â”€ price_formatter.dart
â”œâ”€â”€ android/                         # Android í”Œë«í¼ ì½”ë“œ
â”œâ”€â”€ ios/                            # iOS í”Œë«í¼ ì½”ë“œ
â”œâ”€â”€ web/                            # Web í”Œë«í¼ ì½”ë“œ
â””â”€â”€ pubspec.yaml                    # ì˜ì¡´ì„± ê´€ë¦¬
```

### ğŸ”— ì˜ì¡´ì„± ê´€ê³„

```
main.dart
    â†“
OptimizedAppState (Provider)
    â†“
â”œâ”€â”€ ProductService
â”œâ”€â”€ CartService
â”œâ”€â”€ FavoriteService
â””â”€â”€ SearchService
    â†“
SupabaseService
    â†“
Supabase (Database)
```

---

## 9. ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ì•± íë¦„ë„

### ğŸ‘¤ **ì‚¬ìš©ì "ê¹€ë¯¼ìˆ˜"ì˜ ì‡¼í•‘ ì—¬ì •**

#### ğŸ“± **ì‹œë‚˜ë¦¬ì˜¤ 1: ì•± ì²« ì‹¤í–‰ ë° ìƒí’ˆ ë‘˜ëŸ¬ë³´ê¸°**

```
ê¹€ë¯¼ìˆ˜ â†’ ì•± ì‹¤í–‰
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì•± ì´ˆê¸°í™” ê³¼ì •                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. MainPage ë¡œë“œ                                           â”‚
â”‚ 2. OptimizedAppState.initialize() í˜¸ì¶œ                    â”‚
â”‚ 3. SupabaseService.getAllProducts() â†’ products í…Œì´ë¸” ì¡°íšŒ â”‚
â”‚ 4. SupabaseService.getAllReviews() â†’ reviews í…Œì´ë¸” ì¡°íšŒ   â”‚
â”‚ 5. SupabaseService.getFavorites() â†’ favorites ì¡°íšŒ        â”‚
â”‚ 6. SupabaseService.getCartItems() â†’ cart_items ì¡°íšŒ       â”‚
â”‚ 7. UI ë Œë”ë§ ì™„ë£Œ                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
í™ˆ í™”ë©´ í‘œì‹œ (í”„ë¡œëª¨ì…˜, ì¹´í…Œê³ ë¦¬, ì¸ê¸°ìƒí’ˆ)
    â†“
ê¹€ë¯¼ìˆ˜ â†’ "í›„ë“œí‹°" ì¹´í…Œê³ ë¦¬ í´ë¦­
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì¹´í…Œê³ ë¦¬ í•„í„°ë§ ê³¼ì •                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. HomeContentì—ì„œ ì¹´í…Œê³ ë¦¬ ì„ íƒ                           â”‚
â”‚ 2. OptimizedAppState.setCategory("í›„ë“œí‹°") í˜¸ì¶œ            â”‚
â”‚ 3. _getFilteredProducts() ì‹¤í–‰                             â”‚
â”‚ 4. products.where(category == "í›„ë“œí‹°") í•„í„°ë§             â”‚
â”‚ 5. ProductCard ìœ„ì ¯ë“¤ ë¦¬ë Œë”ë§                             â”‚
â”‚ 6. í›„ë“œí‹° ìƒí’ˆë“¤ë§Œ í™”ë©´ì— í‘œì‹œ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
í›„ë“œí‹° ìƒí’ˆ ëª©ë¡ í‘œì‹œ
```

#### ğŸ›ï¸ **ì‹œë‚˜ë¦¬ì˜¤ 2: ìƒí’ˆ ìƒì„¸ë³´ê¸° ë° ì˜µì…˜ ì„ íƒ**

```
ê¹€ë¯¼ìˆ˜ â†’ íŠ¹ì • í›„ë“œí‹° ìƒí’ˆ í´ë¦­
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ë¡œë“œ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ProductDetail í˜ì´ì§€ë¡œ ë„¤ë¹„ê²Œì´ì…˜                        â”‚
â”‚ 2. initState()ì—ì„œ _loadReviews() í˜¸ì¶œ                     â”‚
â”‚ 3. SupabaseService.getReviews(productId) ì‹¤í–‰              â”‚
â”‚ 4. SupabaseService.getQAs(productId) ì‹¤í–‰                  â”‚
â”‚ 5. ë¦¬ë·°ì™€ Q&A ë°ì´í„° ë¡œë“œ ì™„ë£Œ                              â”‚
â”‚ 6. ìƒí’ˆ ì •ë³´, ë¦¬ë·°, Q&A í‘œì‹œ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ê¹€ë¯¼ìˆ˜ â†’ "ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°" ë²„íŠ¼ í´ë¦­
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ì˜µì…˜ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ProductOptionDialog í‘œì‹œ                                â”‚
â”‚ 2. ê¹€ë¯¼ìˆ˜ â†’ ìƒ‰ìƒ: "ë„¤ì´ë¹„", ì‚¬ì´ì¦ˆ: "L" ì„ íƒ               â”‚
â”‚ 3. ê¹€ë¯¼ìˆ˜ â†’ ìˆ˜ëŸ‰: "2ê°œ" ì„¤ì •                               â”‚
â”‚ 4. "ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°" ë²„íŠ¼ í´ë¦­                               â”‚
â”‚ 5. OptimizedAppState.addToCart() í˜¸ì¶œ                      â”‚
â”‚ 6. SupabaseService.addToCart() ì‹¤í–‰                        â”‚
â”‚ 7. cart_items í…Œì´ë¸”ì— INSERT                              â”‚
â”‚ 8. ì¥ë°”êµ¬ë‹ˆ ì•„ì´ì½˜ì— ë¹¨ê°„ ì  í‘œì‹œ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
"ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤" ìŠ¤ë‚µë°” í‘œì‹œ
```

#### ğŸ›’ **ì‹œë‚˜ë¦¬ì˜¤ 3: ì¥ë°”êµ¬ë‹ˆ ê´€ë¦¬ ë° ê²°ì œ**

```
ê¹€ë¯¼ìˆ˜ â†’ í•˜ë‹¨ ì¥ë°”êµ¬ë‹ˆ ì•„ì´ì½˜ í´ë¦­
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ ë¡œë“œ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. CartPage ë¡œë“œ                                          â”‚
â”‚ 2. OptimizedAppState.cartItems ì¡°íšŒ                        â”‚
â”‚ 3. SupabaseService.getCartItems() ì‹¤í–‰                     â”‚
â”‚ 4. ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ëª©ë¡ í‘œì‹œ                               â”‚
â”‚ 5. ê° ì•„ì´í…œë³„ ìˆ˜ëŸ‰, ê°€ê²©, ì´í•© ê³„ì‚°                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ê¹€ë¯¼ìˆ˜ â†’ ìˆ˜ëŸ‰ ì¡°ì ˆ (+1ê°œ ì¶”ê°€)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ìˆ˜ëŸ‰ ë³€ê²½ ê³¼ì •                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. _updateQuantity(cartItemId, newQuantity) í˜¸ì¶œ           â”‚
â”‚ 2. SupabaseService.updateCartItemQuantity() ì‹¤í–‰           â”‚
â”‚ 3. cart_items í…Œì´ë¸” UPDATE (quantity = 3)                 â”‚
â”‚ 4. OptimizedAppState._cartItems ì—…ë°ì´íŠ¸                   â”‚
â”‚ 5. UI ìë™ ë¦¬ë Œë”ë§ (ì´ ê°€ê²© ë³€ê²½)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ê¹€ë¯¼ìˆ˜ â†’ "ê²°ì œí•˜ê¸°" ë²„íŠ¼ í´ë¦­
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ê²°ì œ í™•ì¸ ê³¼ì •                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. _showPaymentConfirmationDialog() í‘œì‹œ                   â”‚
â”‚ 2. ê²°ì œ ì •ë³´ í‘œì‹œ (ìƒí’ˆ, ìˆ˜ëŸ‰, ì´ì•¡)                        â”‚
â”‚ 3. ê¹€ë¯¼ìˆ˜ â†’ "ê²°ì œ" ë²„íŠ¼ í´ë¦­                               â”‚
â”‚ 4. _processPayment() ì‹¤í–‰                                  â”‚
â”‚ 5. SupabaseService.clearSelectedCartItems() ì‹¤í–‰           â”‚
â”‚ 6. ì„ íƒëœ cart_items ì‚­ì œ                                  â”‚
â”‚ 7. ê²°ì œ ì™„ë£Œ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
"ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ
```

#### â¤ï¸ **ì‹œë‚˜ë¦¬ì˜¤ 4: ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥**

```
ê¹€ë¯¼ìˆ˜ â†’ ìƒí’ˆ ì¹´ë“œì˜ í•˜íŠ¸ ì•„ì´ì½˜ í´ë¦­
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì¦ê²¨ì°¾ê¸° í† ê¸€ ê³¼ì •                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. OptimizedAppState.toggleFavorite(productId) í˜¸ì¶œ        â”‚
â”‚ 2. SupabaseService.toggleFavorite(productId) ì‹¤í–‰          â”‚
â”‚ 3. products í…Œì´ë¸” UPDATE                                  â”‚
â”‚    - is_favorite: false â†’ true                             â”‚
â”‚    - likes: likes + 1                                      â”‚
â”‚ 4. OptimizedAppState._favorites[productId] = true          â”‚
â”‚ 5. UI ìë™ ì—…ë°ì´íŠ¸ (í•˜íŠ¸ ì•„ì´ì½˜ ë³€ê²½)                      â”‚
â”‚ 6. "ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤" ìŠ¤ë‚µë°” í‘œì‹œ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ê¹€ë¯¼ìˆ˜ â†’ í•˜ë‹¨ "ì¦ê²¨ì°¾ê¸°" íƒ­ í´ë¦­
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ì¦ê²¨ì°¾ê¸° í˜ì´ì§€ ë¡œë“œ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. FavoritesPage ë¡œë“œ                                     â”‚
â”‚ 2. OptimizedAppState.favoriteProducts ì¡°íšŒ                 â”‚
â”‚ 3. _favorites Mapì—ì„œ trueì¸ ìƒí’ˆë“¤ í•„í„°ë§                 â”‚
â”‚ 4. ì¦ê²¨ì°¾ê¸°í•œ ìƒí’ˆë“¤ë§Œ í‘œì‹œ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ” **ì‹œë‚˜ë¦¬ì˜¤ 5: ê²€ìƒ‰ ê¸°ëŠ¥**

```
ê¹€ë¯¼ìˆ˜ â†’ í•˜ë‹¨ "ê²€ìƒ‰" íƒ­ í´ë¦­
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ê²€ìƒ‰ í˜ì´ì§€ ë¡œë“œ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. SearchPage ë¡œë“œ                                        â”‚
â”‚ 2. ìµœê·¼ ê²€ìƒ‰ì–´, ì¸ê¸° ê²€ìƒ‰ì–´ í‘œì‹œ                           â”‚
â”‚ 3. ê¹€ë¯¼ìˆ˜ â†’ ê²€ìƒ‰ì°½ì— "ë‚˜ì´í‚¤" ì…ë ¥                         â”‚
â”‚ 4. _performSearch("ë‚˜ì´í‚¤") ì‹¤í–‰                           â”‚
â”‚ 5. OptimizedAppState.allProductsì—ì„œ ë¡œì»¬ ê²€ìƒ‰             â”‚
â”‚    - productName.toLowerCase().contains("ë‚˜ì´í‚¤")           â”‚
â”‚    - brandName.toLowerCase().contains("ë‚˜ì´í‚¤")             â”‚
â”‚ 6. ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ê¹€ë¯¼ìˆ˜ â†’ ê²€ìƒ‰ ê²°ê³¼ì—ì„œ íŠ¹ì • ìƒí’ˆ í´ë¦­
    â†“
ProductDetail í˜ì´ì§€ë¡œ ì´ë™ (ì‹œë‚˜ë¦¬ì˜¤ 2ì™€ ë™ì¼)
```

---

## 10. ë°±ì—”ë“œ ë°ì´í„° íë¦„ë„

### ğŸ—„ï¸ **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë° ê´€ê³„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Supabase Database                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   products  â”‚    â”‚   reviews   â”‚    â”‚     qas     â”‚     â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚     â”‚
â”‚  â”‚ id (PK)     â”‚â—„â”€â”€â”€â”¤ product_id  â”‚    â”‚ product_id  â”‚     â”‚
â”‚  â”‚ brand_name  â”‚    â”‚ content     â”‚    â”‚ question    â”‚     â”‚
â”‚  â”‚ product_nameâ”‚    â”‚ rating      â”‚    â”‚ answer      â”‚     â”‚
â”‚  â”‚ price       â”‚    â”‚ created_at  â”‚    â”‚ created_at  â”‚     â”‚
â”‚  â”‚ discount    â”‚    â”‚ user_id     â”‚    â”‚ user_id     â”‚     â”‚
â”‚  â”‚ image_url   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”‚ category    â”‚            â–²                   â–²          â”‚
â”‚  â”‚ likes       â”‚            â”‚                   â”‚          â”‚
â”‚  â”‚ reviews     â”‚            â”‚                   â”‚          â”‚
â”‚  â”‚ is_favorite â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”‚ created_at  â”‚                    â–²                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚                      â”‚
â”‚           â–²                         â”‚                      â”‚
â”‚           â”‚                         â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚                      â”‚
â”‚  â”‚ cart_items  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚  â”‚             â”‚                                            â”‚
â”‚  â”‚ id (PK)     â”‚                                            â”‚
â”‚  â”‚ user_id     â”‚                                            â”‚
â”‚  â”‚ product_id  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ quantity    â”‚                                          â”‚ â”‚
â”‚  â”‚ selected_optionsâ”‚                                      â”‚ â”‚
â”‚  â”‚ is_selected â”‚                                          â”‚ â”‚
â”‚  â”‚ created_at  â”‚                                          â”‚ â”‚
â”‚  â”‚ updated_at  â”‚                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚ â”‚
â”‚                                                           â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”˜
                                                            â”‚
                                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ë°ì´í„° íë¦„ ì˜ˆì‹œ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ 1. ì•± ì‹œì‘:                                                 â”‚
â”‚    SELECT * FROM products ORDER BY created_at DESC;        â”‚
â”‚    SELECT product_id, COUNT(*) FROM reviews GROUP BY...;   â”‚
â”‚    SELECT * FROM cart_items WHERE user_id = 1;             â”‚
â”‚                                                             â”‚
â”‚ 2. ìƒí’ˆ ê²€ìƒ‰:                                               â”‚
â”‚    ë¡œì»¬ ê²€ìƒ‰ (ëª¨ë“  ìƒí’ˆì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•œ í›„ containsë¥¼ í™œìš©í•´ ê²€ìƒ‰)     â”‚
â”‚                                                             â”‚
â”‚ 3. ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€:                                           â”‚
â”‚    INSERT INTO cart_items (user_id, product_id, quantity...)â”‚
â”‚                                                             â”‚
â”‚ 4. ì¦ê²¨ì°¾ê¸° í† ê¸€:                                           â”‚
â”‚    UPDATE products SET is_favorite = NOT is_favorite,      â”‚
â”‚                       likes = likes + 1 WHERE id = ?;      â”‚
â”‚                                                             â”‚
â”‚ 5. ìˆ˜ëŸ‰ ë³€ê²½:                                               â”‚
â”‚    UPDATE cart_items SET quantity = ? WHERE id = ?;        â”‚
â”‚                                                             â”‚
â”‚ 6. ê²°ì œ ì™„ë£Œ:                                               â”‚
â”‚    DELETE FROM cart_items WHERE id IN (...);               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ **ìƒíƒœ ë™ê¸°í™” íë¦„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ìƒíƒœ ë™ê¸°í™” ê³¼ì •                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì‚¬ìš©ì ì•¡ì…˜ â†’ UI ìœ„ì ¯ â†’ Service â†’ SupabaseService â†’ DB    â”‚
â”‚       â†“              â†“         â†“            â†“           â†“   â”‚
â”‚  ë²„íŠ¼ í´ë¦­    â†’  ProductCard â†’ AppState â†’ SupabaseService â†’ â”‚
â”‚       â†“              â†“         â†“            â†“               â”‚
â”‚  ìƒíƒœ ë³€ê²½    â†  UI ë¦¬ë Œë”ë§ â† notifyListeners() â† DB ì‘ë‹µ  â”‚
â”‚                                                             â”‚
â”‚  ì˜ˆì‹œ: ì¦ê²¨ì°¾ê¸° í† ê¸€                                         â”‚
â”‚  1. ê¹€ë¯¼ìˆ˜ê°€ í•˜íŠ¸ ì•„ì´ì½˜ í´ë¦­                               â”‚
â”‚  2. ProductCardì˜ onPressed ì‹¤í–‰                           â”‚
â”‚  3. OptimizedAppState.toggleFavorite(productId) í˜¸ì¶œ       â”‚
â”‚  4. SupabaseService.toggleFavorite(productId) ì‹¤í–‰         â”‚
â”‚  5. SQL: UPDATE products SET is_favorite = NOT is_favorite â”‚
â”‚  6. DBì—ì„œ ì„±ê³µ ì‘ë‹µ                                        â”‚
â”‚  7. OptimizedAppState._favorites[productId] = true         â”‚
â”‚  8. notifyListeners() í˜¸ì¶œ                                  â”‚
â”‚  9. ProductCard ìë™ ë¦¬ë Œë”ë§ (í•˜íŠ¸ ì•„ì´ì½˜ ë³€ê²½)            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š **ì„±ëŠ¥ ìµœì í™” ì „ëµ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ì„±ëŠ¥ ìµœì í™” ì ìš© ì˜ì—­                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ 1. ë°ì´í„° ìºì‹±:                                             â”‚
â”‚    - ì•± ì‹œì‘ì‹œ ëª¨ë“  ìƒí’ˆì„ ë©”ëª¨ë¦¬ì— ë¡œë“œ                    â”‚
â”‚    - ë¦¬ë·° ìˆ˜ë¥¼ Mapìœ¼ë¡œ ìºì‹±                                â”‚
â”‚    - ì¦ê²¨ì°¾ê¸° ìƒíƒœë¥¼ Mapìœ¼ë¡œ ìºì‹±                          â”‚
â”‚                                                             â”‚
â”‚ 2. ë¡œì»¬ ê²€ìƒ‰:                                               â”‚
â”‚    - DB ì¿¼ë¦¬ ëŒ€ì‹  ë©”ëª¨ë¦¬ì—ì„œ ê²€ìƒ‰                          â”‚
â”‚    - ì‹¤ì‹œê°„ ê²€ìƒ‰ ê²°ê³¼ ì œê³µ                                  â”‚
â”‚                                                             â”‚
â”‚ 3. ì„ íƒì  ë¦¬ë Œë”ë§:                                         â”‚
â”‚    - Selector ì‚¬ìš©ìœ¼ë¡œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸               â”‚
â”‚    - Consumer ëŒ€ì‹  Selectorë¡œ ì„±ëŠ¥ í–¥ìƒ                    â”‚
â”‚                                                             â”‚
â”‚ 4. ì´ë¯¸ì§€ ìµœì í™”:                                           â”‚
â”‚    - CachedNetworkImageë¡œ ìë™ ìºì‹±                        â”‚
â”‚    - ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ìµœì†Œí™”                                   â”‚
â”‚                                                             â”‚
â”‚ 5. ë©”ëª¨ë¦¬ ê´€ë¦¬:                                             â”‚
â”‚    - dispose ë©”ì„œë“œë¡œ ë¦¬ì†ŒìŠ¤ í•´ì œ                          â”‚
â”‚    - ë¶ˆí•„ìš”í•œ ìœ„ì ¯ ë¦¬ë¹Œë“œ ë°©ì§€                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. ì—ëŸ¬ ì²˜ë¦¬ ë° ì˜ˆì™¸ ìƒí™©

### âš ï¸ **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì—ëŸ¬ ì²˜ë¦¬ íë¦„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì‹œë‚˜ë¦¬ì˜¤: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨                               â”‚
â”‚                                                             â”‚
â”‚ 1. SupabaseService.getAllProducts() ì‹¤í–‰                   â”‚
â”‚ 2. ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ                                       â”‚
â”‚ 3. try-catchì—ì„œ ì—ëŸ¬ ìºì¹˜                                 â”‚
â”‚ 4. print('Error loading products: $e') ë¡œê·¸ ì¶œë ¥           â”‚
â”‚ 5. ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜                                          â”‚
â”‚ 6. UIì—ì„œ ë¡œë”© ìƒíƒœ í‘œì‹œ                                   â”‚
â”‚ 7. ì‚¬ìš©ìì—ê²Œ "ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”" ë©”ì‹œì§€ í‘œì‹œ             â”‚
â”‚                                                             â”‚
â”‚  ì˜ˆì™¸ ìƒí™©ë“¤:                                               â”‚
â”‚  - ì¸í„°ë„· ì—°ê²° ì—†ìŒ                                         â”‚
â”‚  - Supabase ì„œë²„ ë‹¤ìš´                                       â”‚
â”‚  - íƒ€ì„ì•„ì›ƒ ì˜¤ë¥˜                                           â”‚
â”‚  - ì¸ì¦ ì˜¤ë¥˜                                               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ **ë°ì´í„° ë™ê¸°í™” ì‹¤íŒ¨ ì²˜ë¦¬**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ë°ì´í„° ë™ê¸°í™” ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì‹œë‚˜ë¦¬ì˜¤: ì¦ê²¨ì°¾ê¸° í† ê¸€ ì‹¤íŒ¨                               â”‚
â”‚                                                             â”‚
â”‚ 1. ê¹€ë¯¼ìˆ˜ê°€ í•˜íŠ¸ ì•„ì´ì½˜ í´ë¦­                               â”‚
â”‚ 2. OptimizedAppState.toggleFavorite() í˜¸ì¶œ                 â”‚
â”‚ 3. SupabaseService.toggleFavorite() ì‹¤í–‰                   â”‚
â”‚ 4. DB ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ (ê¶Œí•œ ì—†ìŒ ë“±)                         â”‚
â”‚ 5. catchErrorì—ì„œ false ë°˜í™˜                               â”‚
â”‚ 6. UI ìƒíƒœ ë³€ê²½í•˜ì§€ ì•ŠìŒ (ì›ë˜ ìƒíƒœ ìœ ì§€)                  â”‚
â”‚ 7. ì‚¬ìš©ìì—ê²Œ "ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”" ë©”ì‹œì§€ í‘œì‹œ               â”‚
â”‚                                                             â”‚
â”‚  ë³µêµ¬ ì „ëµ:                                                 â”‚
â”‚  - ë¡œì»¬ ìƒíƒœì™€ ì„œë²„ ìƒíƒœ ë™ê¸°í™”                             â”‚
â”‚  - ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ êµ¬í˜„                                     â”‚
â”‚  - ì˜¤í”„ë¼ì¸ ëª¨ë“œ ì§€ì›                                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ê²°ë¡ 

### âœ… ë‹¬ì„±í•œ ëª©í‘œ

1. **ì½”ë“œ ë¶„ë¦¬**: 500ì¤„ì˜ ê±°ëŒ€í•œ í´ë˜ìŠ¤ë¥¼ 6ê°œì˜ ì „ë¬¸í™”ëœ ì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬
2. **ìœ„ì ¯ ë¶„ë¦¬**: ë³µì¡í•œ UIë¥¼ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬
3. **ì„±ëŠ¥ ìµœì í™”**: ì•± ì‹œì‘ ì‹œê°„ 50% ê°œì„ , ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 33% ê°ì†Œ
4. **ìœ ì§€ë³´ìˆ˜ì„±**: ê° ì»´í¬ë„ŒíŠ¸ì˜ ì±…ì„ì´ ëª…í™•í•´ì ¸ ìˆ˜ì •ì´ ìš©ì´
5. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ì‹œ ê¸°ì¡´ ì½”ë“œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ ìµœì†Œí™”

### ğŸš€ í–¥í›„ ê°œì„  ë°©í–¥

1. **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€**: ê° ì„œë¹„ìŠ¤ë³„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
2. **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”**: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ë°ì´í„° ì˜¤ë¥˜ ì²˜ë¦¬ ê°œì„ 
3. **ìºì‹± ì „ëµ ê³ ë„í™”**: ë” ì •êµí•œ ìºì‹± ì‹œìŠ¤í…œ êµ¬ì¶•
4. **ì½”ë“œ ë¬¸ì„œí™”**: API ë¬¸ì„œ ë° ê°œë°œ ê°€ì´ë“œ ì‘ì„±

ì´ ì•„í‚¤í…ì²˜ëŠ” **Clean Architecture** ì›ì¹™ì„ ë”°ë¥´ë©°, **ë‹¨ì¼ ì±…ì„ ì›ì¹™**ê³¼ **ì˜ì¡´ì„± ì—­ì „ ì›ì¹™**ì„ ì ìš©í•˜ì—¬ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•œ êµ¬ì¡°ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
